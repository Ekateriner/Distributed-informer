# Telegram bot
#### @Incident_Informing_Bot

### Начало работы
Для начала работы вы должны сообщить боту секретную фразу (сейчас это __zombie__). Пока вы этого не сделаете,
бот не будет вам отвечать.

### Разработка
Для поддержки функционала защиты секретной фразой для новых функций, обрабатывающих сообщения,
используйте декоратор `@validate`.

В `configs/` хранится информация о юзерах. `validation.json` - dict[user_id]bool - провалидировался ли юзер.
`users.json` - полная информация об юзерах. `notifications.json` - информация о индексах уведомлений пользователей.
Сейчас это ник, id, почта(нужно запрашивать).
Не забудьте, что все ключи диктов словаря, загруженного из json - строки.

#### Добавление юзера в базу
У бота есть команда `/register`, после которой бот предлагает ввести ваш email. Если email соответствует регулярке,
вшитой в бота, например, `r".*@qrator.ru"`, бот регистрирует пользователя в админку с именем/ником из 
телеграма и заданной почтой.

#### Добавление уведомления
У ботае есть команда `/notify`, после которого бот предлагает ввести данные по форме. После этого бот добавляет уведомление в базу.

#### Показ уведомлений
Есть команда `/show_notifications`, которая демонстрирует текущие уведомления пользователя.

#### Показ шаблонов
Такая же команда `/show_temps`, демонстрирующая доступные шаблоны для пользователя.

#### Удаление уведомления
Есть и команда `/undo_notify`, которая останавливает отправку соответствующего уведомления по введенному идентификатору.
Если ошибочно введен неверный идентификатор, бот сообщает об ошибке. 

#### Удаление пользователя
Команда бота `/delete` удаляет пользователя из базы, включая уведомления.

### VPN
Для запуска мне понадобился VPN. Использовал этот, вроде неплохой.
https://rus.windscribe.com/guides/linux